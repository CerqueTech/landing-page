---
const testimonials = [
    {
        name: 'Sarah Johnson',
        position: 'CEO, TechStart Inc.',
        content:
            'Cerquetech delivered an exceptional e-commerce platform that exceeded our expectations. Their team was professional, responsive, and truly understood our business needs. The result was a seamless user experience that has significantly increased our conversion rates.',
        image: '/testimonials/testimonial-1.jpg'
    },
    {
        name: 'Michael Rodriguez',
        position: 'CTO, HealthPlus',
        content:
            'Working with Cerquetech on our healthcare app was a game-changer for our business. Their expertise in both mobile development and healthcare regulations was invaluable. The app they built has streamlined our operations and improved patient satisfaction.',
        image: '/testimonials/testimonial-2.jpg'
    },
    {
        name: 'Emily Chen',
        position: 'Marketing Director, GlobalFinance',
        content:
            'The financial dashboard Cerquetech created for us has transformed how we analyze and present data to our clients. Their attention to detail and commitment to quality is evident in every aspect of the project. I highly recommend their services.',
        image: '/testimonials/testimonial-3.jpg'
    },
    {
        name: 'David Wilson',
        position: 'Founder, PropertyMatch',
        content:
            'Cerquetech took our real estate platform from concept to reality with impressive efficiency. Their team provided valuable insights throughout the development process and delivered a product that has received overwhelmingly positive feedback from our users.',
        image: '/testimonials/testimonial-4.jpg'
    },
    {
        name: 'Lisa Thompson',
        position: 'Operations Manager, LogiTech Solutions',
        content:
            'The logistics management system developed by Cerquetech has revolutionized our supply chain operations. Their technical expertise and understanding of our industry challenges resulted in a solution that has improved efficiency by over 40%.',
        image: '/testimonials/testimonial-5.jpg'
    }
];
---

<section id='testimonials' class='section bg-gray-50'>
    <div class='container'>
        <h2 class='section-title'>What Our Clients Say</h2>
        <p class='section-subtitle'>
            Don't just take our word for it. Here's what our clients have to say
            about working with us.
        </p>

        <div class='testimonials-slider mt-12 relative'>
            <!-- Testimonial Cards -->
            <div class='testimonial-container overflow-hidden'>
                <div
                    class='testimonial-track flex transition-transform duration-500'
                >
                    {
                        testimonials.map((testimonial, index) => (
                            <div class='testimonial-slide min-w-full md:min-w-[50%] lg:min-w-[33.333%] px-4'>
                                <div class='bg-white rounded-xl shadow-md p-6 h-full flex flex-col'>
                                    <div class='flex items-center mb-4'>
                                        <div class='w-12 h-12 rounded-full overflow-hidden mr-4'>
                                            <img
                                                src={testimonial.image}
                                                alt={testimonial.name}
                                                class='w-full h-full object-cover'
                                                onerror="this.src='/testimonials/default-avatar.jpg'"
                                            />
                                        </div>
                                        <div>
                                            <h4 class='font-bold'>
                                                {testimonial.name}
                                            </h4>
                                            <p class='text-sm text-gray-600'>
                                                {testimonial.position}
                                            </p>
                                        </div>
                                    </div>
                                    <div class='mb-4'>
                                        <svg
                                            class='h-5 w-5 text-yellow-400 inline-block'
                                            xmlns='http://www.w3.org/2000/svg'
                                            viewBox='0 0 20 20'
                                            fill='currentColor'
                                        >
                                            <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />
                                        </svg>
                                        <svg
                                            class='h-5 w-5 text-yellow-400 inline-block'
                                            xmlns='http://www.w3.org/2000/svg'
                                            viewBox='0 0 20 20'
                                            fill='currentColor'
                                        >
                                            <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />
                                        </svg>
                                        <svg
                                            class='h-5 w-5 text-yellow-400 inline-block'
                                            xmlns='http://www.w3.org/2000/svg'
                                            viewBox='0 0 20 20'
                                            fill='currentColor'
                                        >
                                            <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />
                                        </svg>
                                        <svg
                                            class='h-5 w-5 text-yellow-400 inline-block'
                                            xmlns='http://www.w3.org/2000/svg'
                                            viewBox='0 0 20 20'
                                            fill='currentColor'
                                        >
                                            <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />
                                        </svg>
                                        <svg
                                            class='h-5 w-5 text-yellow-400 inline-block'
                                            xmlns='http://www.w3.org/2000/svg'
                                            viewBox='0 0 20 20'
                                            fill='currentColor'
                                        >
                                            <path d='M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z' />
                                        </svg>
                                    </div>
                                    <p class='text-gray-600 flex-grow'>
                                        {testimonial.content}
                                    </p>
                                    <div class='mt-4 text-primary'>
                                        <svg
                                            xmlns='http://www.w3.org/2000/svg'
                                            class='h-6 w-6 opacity-50'
                                            fill='none'
                                            viewBox='0 0 24 24'
                                            stroke='currentColor'
                                        >
                                            <path
                                                stroke-linecap='round'
                                                stroke-linejoin='round'
                                                stroke-width='2'
                                                d='M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z'
                                            />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        ))
                    }
                </div>
            </div>

            <!-- Navigation Buttons -->
            <button
                class='testimonial-prev absolute top-1/2 left-0 -translate-y-1/2 bg-white rounded-full shadow-md p-2 z-10 hover:bg-primary hover:text-white transition-colors'
            >
                <svg
                    xmlns='http://www.w3.org/2000/svg'
                    class='h-6 w-6'
                    fill='none'
                    viewBox='0 0 24 24'
                    stroke='currentColor'
                >
                    <path
                        stroke-linecap='round'
                        stroke-linejoin='round'
                        stroke-width='2'
                        d='M15 19l-7-7 7-7'></path>
                </svg>
            </button>
            <button
                class='testimonial-next absolute top-1/2 right-0 -translate-y-1/2 bg-white rounded-full shadow-md p-2 z-10 hover:bg-primary hover:text-white transition-colors'
            >
                <svg
                    xmlns='http://www.w3.org/2000/svg'
                    class='h-6 w-6'
                    fill='none'
                    viewBox='0 0 24 24'
                    stroke='currentColor'
                >
                    <path
                        stroke-linecap='round'
                        stroke-linejoin='round'
                        stroke-width='2'
                        d='M9 5l7 7-7 7'></path>
                </svg>
            </button>

            <!-- Dots -->
            <div class='testimonial-dots flex justify-center mt-8 space-x-2'>
                {
                    testimonials.map((_, index) => (
                        <button
                            class={`testimonial-dot w-3 h-3 rounded-full bg-gray-300 hover:bg-primary transition-colors ${index === 0 ? 'bg-primary' : ''}`}
                            data-index={index}
                        />
                    ))
                }
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const track = document.querySelector(
            '.testimonial-track'
        ) as HTMLElement;
        const slides = document.querySelectorAll('.testimonial-slide');
        const dots = document.querySelectorAll('.testimonial-dot');
        const prevBtn = document.querySelector('.testimonial-prev');
        const nextBtn = document.querySelector('.testimonial-next');

        let currentIndex = 0;
        const slideWidth = 100; // percentage
        const totalSlides = slides.length;

        // Set initial position
        updateSlider();

        // Handle next button click
        nextBtn?.addEventListener('click', () => {
            if (currentIndex < totalSlides - 1) {
                currentIndex++;
            } else {
                currentIndex = 0; // Loop back to first slide
            }
            updateSlider();
        });

        // Handle prev button click
        prevBtn?.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
            } else {
                currentIndex = totalSlides - 1; // Loop to last slide
            }
            updateSlider();
        });

        // Handle dot clicks
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                currentIndex = index;
                updateSlider();
            });
        });

        // Update slider position and active dot
        function updateSlider() {
            if (track) {
                // For mobile: full width slides
                // For tablet: 2 slides visible
                // For desktop: 3 slides visible
                let visibleSlides = 1;
                if (window.innerWidth >= 768) visibleSlides = 2;
                if (window.innerWidth >= 1024) visibleSlides = 3;

                const offset = -(currentIndex * (slideWidth / visibleSlides));
                track.style.transform = `translateX(${offset}%)`;

                // Update active dot
                dots.forEach((dot, index) => {
                    if (index === currentIndex) {
                        dot.classList.add('bg-primary');
                        dot.classList.remove('bg-gray-300');
                    } else {
                        dot.classList.remove('bg-primary');
                        dot.classList.add('bg-gray-300');
                    }
                });
            }
        }

        // Handle window resize
        window.addEventListener('resize', updateSlider);

        // Auto-advance slides every 5 seconds
        setInterval(() => {
            if (currentIndex < totalSlides - 1) {
                currentIndex++;
            } else {
                currentIndex = 0;
            }
            updateSlider();
        }, 5000);
    });
</script>

